@attribute [Authorize(Roles = "User")]
@attribute [Route(Routes.UserSettings)]

<AuthorizeView>
    <Authorized>
        <MudStack>
            <MudStack Row AlignItems="AlignItems.End" Class="d-flex align-center">
                <MudText Typo="Typo.h5">User Settings</MudText>
                <MudSpacer />
                <ProgressButton 
                    InProgress="@_inProgress" 
                    Color="Color.Primary" 
                    Disabled="@_inProgress" 
                    Label="Export" 
                    StartIcon="@Icons.Material.Filled.FileDownload" 
                    OnClick="Export" />
                <ProgressButton 
                    InProgress="false" 
                    Color="Color.Primary" 
                    Disabled="@_inProgress"
                    Label="Import"
                    StartIcon="@Icons.Material.Filled.FileUpload"
                    OnClick="@OpenImportDialog"/>
            </MudStack>    
            <span>@($"You are currently logged in with {context.User.FindFirst("loggedInProvider")?.Value}")</span><br />
            <span>These are all the identity providers that are linked to this account</span><br />
            <ul>
                @foreach (var linkedProvider in context.User.FindAll("provider"))
                {
                    <li>@linkedProvider.Value</li>
                }
            </ul><br />
            <span>These are all the roles you have</span> <br />
            <ul>
                @foreach (var role in context.User.FindAll(ClaimTypes.Role))
                {
                    <li>@role.Value</li>
                }
            </ul>
        </MudStack>
    </Authorized>
</AuthorizeView>